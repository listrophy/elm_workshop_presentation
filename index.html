<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/solarized.css" id="theme">
		<link rel="stylesheet" href="css/custom.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/github.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">



<section>
  <h1>Elm for Rails Developers</h1>
  <h2>Instructor: Brad Grzesiak</h2>
  <p>@listrophy</p>
  <p>Please visit ellie-app.com</p>
</section>

<section data-markdown>
  <script type="text/template">
## About Me

* ~2 years with Elm
* CEO/co-founder of Bendyworks
* Former Aerospace Engineer
* Science Consultant
  </script>
</section>

<section data-markdown>
  <script type="text/template">
## Agenda

* Compare/Contrast with Ruby/Rails
* Elm Syntax (c.f. Ruby)
* Elm Semantics (c.f. Rails)
* Mini-Exercises
* SpaceElm!
  </script>
</section>

<section>
  <h1>Compare/Contrast with Ruby</h1>
</section>

<style>
  [data-columns] {
    display: flex !important;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
  }
  [data-columns] h2 {
    flex: 1 0 100%;
  }
  [data-columns] .column {
    margin-left: 1.5em;
    margin-right: 1.5em;
  }
</style>

<section>
<h2>Some Similarities</h2>

<ul>
  <li class="fragment">Strings, Numbers, Dicts<sup>&#42;</sup>, Arrays<sup>&#42;</sup></li>
  <li class="fragment">Modules</li>
  <li class="fragment">Functions, but not <i>methods</i></li>
  <li class="fragment">Last expression is return value</li>
  <li class="fragment">Avoid parens where possible</li>
  <li class="fragment">(Rails) Directory Structure => Module Structure</li>
</ul>
</section>

<section>
  <h1>Some Differences</h1>
</section>

<section>
  <h2>Functions, not Methods</h2>
  <pre><code data-trim data-noescape class="ruby">
    [3, 1, 2].sort
      # => [1, 2, 3]
  </code></pre>

  <pre><code data-trim data-noescape class="elm">
    List.sort [3, 1, 2]
      -- => [1, 2, 3]
  </code></pre>
</section>

<section>
  <h2>Functions, not Methods (pt 2)</h2>
  <pre><code data-trim data-noescape class="ruby">
    ["a", "b", "c"].join " "
      # => "a b c"
  </code></pre>

  <pre><code data-trim data-noescape class="elm">
    String.join " " ["a", "b", "c"]
      -- => "a b c"
  </code></pre>

  <p>Note: No commas between args</p>
  <p>Note 2: "Data" acted upon is last arg</p>
</section>

<section>
  <h2>Everything is Immutable</h2>
  <pre><code data-trim data-noescape class="ruby">
    x = [3, 1, 2]
    y = x.sort  # Elm equivalent exists
    x.sort!     # Elm equivalent does not exist
  </code></pre>

  <pre><code data-trim data-noescape class="elm">
    List.sort [3, 1, 2]
  </code></pre>

</section>

<section>
  <h2>Super Weird Indentation Conventions</h2>
  <p>Turns out, they're not actually that bad!</p>

  <pre><code data-trim data-noescape class="ruby">
aList = [
  foo,
  bar,
  baz
]
  </code></pre>

  <pre><code data-trim data-noescape class="elm">
aList =
  [ foo
  , bar
  , baz
  ]
  </code></pre>
</section>

<section>
  <h2>Type Strictness</h2>

  <pre><code data-trim data-noescape class="ruby">
aNumber = 42
errorMessage =
  if aNumber
    "An error of type #{aNumber} occurred."
  end
  </code></pre>

  <pre class="fragment" data-fragment-index="1"><code data-trim data-noescape class="elm">
aNumber = 42
errorMessage =
  if aNumber <mark>/=</mark> 0 <mark>then</mark>
    "An error of type " ++ (<mark>toString</mark> aNumber) ++ " occurred."
  <mark>else</mark>
    ""
  </code></pre>

  <p class="fragment" data-fragment-index="1">
    <small>Note: There is no "truthy" or "falsey", only "True" or "False"<br>
      Note: No automatic string conversion<br>
      Note: All code-paths must yield same type<br>
      Note: Indentation matters!
    </small>
  </p>

</section>

<section>
  <h2>Explicit Type Signatures Are a Thing</h2>
  <pre><code data-trim data-noescape class="elm">
    aValue : String
    aValue =
      "foo"

    aFunc : String -> String
    aFunc stringArg =
      String.toUpper (String.trim stringArg)
  </code></pre>
</section>

<section>
  <h2>Importing is Not Transitive</h2>

  <pre><code data-trim data-noescape class="ruby">
    require 'foo'

    # Now everything from 'foo' is available,
    # INCLUDING everything that 'foo' itself required
  </code></pre>

  <pre><code data-trim data-noescape class="elm">
    import Foo

    -- Now everything from Foo is available but still namespaced
    -- under "Foo."
    --
    -- Nothing that Foo imported in its own file is available here
    -- unless it's been explicitly "exposed"
  </code></pre>
</section>

<section>
  <h2>Exporting is Specified</h2>
    <pre><code data-trim data-noescape class="ruby">
      # in file "foo.rb"

      class Foo; end

      # files that require 'foo' have access to Foo
    </code></pre>

    <pre><code data-trim data-noescape class="elm">
      -- in file "Foo.elm"

      module Foo exposing (foo, foo2)

      -- files that "import Foo" can only access
      -- functions "foo" and "foo2"
    </code></pre>

    <pre><code data-trim data-noescape class="elm">
      -- in file "Foo.elm"

      module Foo exposing (..)

      -- files that import 'Foo' can access all functions in Foo
    </code></pre>

</section>

<section>
  <h2>Granular, Configurable Importing</h2>

  <pre><code data-trim data-noescape class="ruby">
    require 'foo'

    # Now everything from 'foo' is available,
    # INCLUDING everything that 'foo' itself required
  </code></pre>

  <pre><code data-trim data-noescape class="elm">
    import Foo
    import Bar as B
    import Baz exposing (..)
    import Qux exposing (corge)

    Foo.func "a" -- call "func" from module Foo with arg "a"
    B.func "a" -- call "func" from module Bar with arg "a"
    bazzle "a" -- call "bazzle" with arg "a",
               -- which apparently came from Baz
    corge "a" -- call "corge" from module Qux, with arg "a"
  </code></pre>
</section>



<section>
  <h2>Case > If-Else</h2>


  <pre><code data-trim data-noescape class="ruby">
    if foo?
      doSomething
    else
      doOtherThing
    end
  </code></pre>


  <pre><code data-trim data-noescape class="elm">
    case foo of
      True ->
        doSomething

      False ->
        doOtherThing
  </code></pre>

  <p>Note: The compiler ensures case statements are exhaustive!</p>

</section>

<section>
  <h2>Views are Functions, Not Templates</h2>

  <pre><code data-trim class="erb">
    <% if current_user %>
      <%= button_to "Log out", destroy_session_path %>
    <% else %>
      <%= render partial: 'login' %>
    <% end %>
  </code></pre>


  <pre><code data-trim data-noescape class="elm">
    case model.currentUser of
      User _ ->
        Html.button
          [ onClick SignOut ]
          [ text "Log out" ]

      Anonymous ->
        loginView

      <span class="fragment">Admin _ ->
        adminSimulateUserOrLogoutView</span>
  </code></pre>
</section>

<section>
  <h2>Functions are First-Class</h2>

    <pre><code data-trim data-noescape class="js">
      var logDiv = function(index, div) {
        console.log(div.innerHTML);
      };

      $('div').each(logDiv);
    </code></pre>


    <pre><code data-trim data-noescape class="elm">
      List.map <mark>String.toUpper</mark> ["foo", "bar", "baz"]
    </code></pre>
</section>

<section>
  <h1>Syntax</h1>
</section>

<section>
  <h2>A Really Basic File</h2>
  <p>Just a grab-bag to show syntax:</p>
  <pre><code data-trim data-noescape class="elm">
    module Trilean
        exposing
            ( Reason
            , Trilean
            , isSure
            , reason
            )

    -- ...
  </code></pre>
</section>

<section>
  <pre><code data-trim data-noescape class="elm">
    -- ...

    type alias Reason =
        String

    type Trilean
        = Yes
        | No
        | Other Reason

    -- ...
  </code></pre>
</section>

<section>
  <pre><code data-trim data-noescape class="elm">
    -- ...

    <span class="fragment highlight-background-yellow">isSure : Trilean -> Bool</span>
    isSure trilean =
        case trilean of
            Yes ->
                True

            _ ->
                False

    -- ...
  </code></pre>
</section>

<section>
    <pre><code data-trim data-noescape class="elm">
    -- ...

    reason : Trilean -> Maybe String
    reason trilean =
        case trilean of
            Other str ->
                Just str

            _ ->
                Nothing

    -- ...
  </code></pre>
</section>

<section>
  <h2>Whoa Whoa Whoa... Maybe?</h2>

  <dl>
    <dt><code>String</code></dt>
    <dd>A <kbd>String</kbd> that can <strong>never</strong> be nil</dd>
    <dt><code>Maybe String</code></dt>
    <dd>A box containing either <kbd>Nothing</kbd> or <kbd>Just</kbd> a <kbd>String</kbd></dd>
  </dl>
  <hr class="fragment" data-fragment-index="1" />
  <p class="fragment" data-fragment-index="1"><strong>Important:</strong> You cannot use a <kbd>Maybe String</kbd> like
    a <kbd>String</kbd> any more than you can use an <kbd>Array</kbd> of <kbd>String</kbd>s like
    a single <kbd>String</kbd> in Ruby.
  </p>
</section>

<section>
  <h2>Speaking of Lists...</h2>

  <pre><code data-trim data-noescape class="elm">
    singleDigitInts : List Int
    singleDigitInts =
        [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ]
        -- or `List.range 0 9`

    doubleList : List Int -> List Int
    doubleList list =
        List.map <span class="fragment highlight-background-yellow">(\int -> 2 * int)</span> list
        -- in Ruby:
        -- list.map { |int| 2 * int }
  </code></pre>
</section>

<section>
  <h2>Regarding "map"</h2>

  <dl>
    <dt><kbd>Namespace.map f wrapper</kbd></dt>
    <dd>Perform the function "f" on the data inside "wrapper", in the way
      that makes sense for the <em>type</em> of the "wrapper" as redundantly
      indicated by "Namespace."</dd>
  </dl>
</section>

<section>
  <h2>Regarding "map"</h2>

  <dl>
    <dt><kbd>List.map f list</kbd></dt>
    <dd>Perform "f" on each item in the "list"</dd>
    <dt class="fragment" data-fragment-index="1"><kbd>Maybe.map f maybeThing</kbd></dt>
    <dd class="fragment" data-fragment-index="1">Perform "f" on the item in the "maybeThing," assuming it's not "Nothing."</dd>
    <dt class="fragment" data-fragment-index="2"><kbd>Dict.map f dictionary</kbd></dt>
    <dd class="fragment" data-fragment-index="2">Replace each value in "dictionary" with the result of applying "f" to each key-value pair.</dd>
  </dl>
</section>

<section>
  <h2>Typical "map" Signature</h2>

  <pre><code data-trim data-noescape class="elm">
    map : (a -> b) -> ConcreteType a -> ConcreteType b

    -- for List
    map : (a -> b) -> List a -> List b

    -- for Maybe
    map : (a -> b) -> Maybe a -> Maybe b

    -- Elm does not have Higher-Kinded Types, so this doesn't work:
    map&lt;M&gt; : (a -> b) -> M a -> M b
  </code></pre>
  <p>Note: Lack of Higher-Kinded Types in this situation means you can't have a generic
    <kbd>map</kbd> function that works on anything "mappable."</p>
</section>

<section>
  <h2><kbd>Let</kbd>'s Take it Easy</h2>

  <pre><code data-trim data-noescape class="elm">
    normalizeString : String -> String
    normalizeString input =
        <mark>let</mark>
            trimmed = String.trim input
            lower = String.toLower trimmed
        <mark>in</mark>
            String.padLeft 8 ' ' lower
  </code></pre>
</section>

<section>
  <h2>Guzinta!</h2>
  <p>ok, ok, "forward function application"</p>

  <pre><code data-trim data-noescape class="elm">
    normalizeString : String -> String
    normalizeString input =
        let
            trimmed = String.trim input
            lower = String.toLower trimmed
        in
            String.padLeft 8 ' ' lower

    alsoNormalizeString : String -> String
    alsoNormalizeString input =
        input
          |> String.trim
          |> String.toLower
          |> <span class="fragment highlight-background-yellow">String.padLeft 8 ' '</span>
  </code></pre>
</section>

<section>
  <h2>Partial Application</h2>

  <p>You can supply only <em>some</em> arguments to <strong>any</strong> function,
    though only from left-to-right.</p>

    <pre><code data-trim data-noescape class="elm">
      -- type signature of String.padLeft:
      padLeft : Int -> Char -> String -> String

      -- effective type signature of String.padLeft:
      padLeft : Int -> (Char -> (String -> String))
    </code></pre>

    <p>Therefore, if you know the padding width, but not the padding char or the string, you can do:</p>
    <pre><code data-trim data-noescape class="elm">
      String.padLeft 8
        -- &lt;function&gt; : Char -> String -> String
    </code></pre>
</section>

<section>
  <h2>What about Compositiion?</h2>

  <pre><code data-trim data-noescape class="elm">
    alsoNormalizeString : String -> String
    alsoNormalizeString input =
        input
          |> String.trim
          |> String.toLower
          |> String.padLeft 8 ' '

    moreNormalizeString : String -> String
    moreNormalizeStri<span class="fragment highlight-background-yellow">ng =</span>
      String.trim >> String.toLower >> String.padLeft 8 ' '
  </code></pre>
  <p>Note: This is kinda advanced and not completely necessary for the purposes
    of this workshop</p>
</section>

<section>
  <h2>Avoiding parens</h2>

  <pre><code data-trim data-noescape class="elm">
    parenNormalizeString : String -> String
    parenNormalizeString input =
        String.padLeft 8 ' ' (String.toLower (String.trim input))

    anotherNormalizeString : String -> String
    anotherNormalizeString input =
        String.padLeft 8 ' ' <| String.toLower <| String.trim input
  </code></pre>
  <p>Note: Much like in Ruby, the balance between using and not using parens
    is subject to much debate</p>
</section>

<section>
  <h2>Primitives!</h2>

  <pre><code data-trim data-noescape class="elm">
    x = 42              -- Int
    y = 3.14            -- Float
    c = '.'             -- Char (rarely used)
    s = "hello world"   -- String
    l = []              -- List a
    t = (1, "foo", 4.0) -- Tuple of type (Int, String, Float)

    -- Record of type { foo : String, bar : Int }
    r = { foo = "foo", bar = 123}
  </code></pre>
</section>

<section>
  <h2>Common, Built-in Types</h2>

  <pre><code data-trim data-noescape class="elm">
    -- Bool
    b1 = True
    b2 = False

    -- Maybe a
    -- here, "Maybe String"
    m1 = Just "a string"
    m2 = Nothing

    -- Result a b
    -- here, "Result String Int"
    r1 = Ok 42
    r2 = Err "error message"
  </code></pre>
</section>

<section>
  <h2>Type Definitions</h2>

  <pre><code data-trim data-noescape class="elm">
    -- ours
    type Trilean
      = Yes
      | No
      | Other Reason

    -- builtin
    type Result a b
      = Err a
      | Ok b

    type Maybe a
      = Just a
      | Nothing
  </code></pre>
</section>

<section>
  <h2>Types vs. Values of Types</h2>

  <pre><code data-trim data-noescape class="elm">
    type Maybe a
      = Just a
      | Nothing

    -- Type constructors
    Just : a -> Maybe a
    Nothing : Maybe a

    type Result a b
      = Err a
      | Ok b
  </code></pre>
</section>

<section>
  <h2>Using Type Signatures</h2>

  <pre><code data-trim data-noescape class="elm">
    -- List
    first : List a -> Maybe a

    -- String
    join : String -> List String -> String

    -- Json.Decode
    decodeString : Decoder a -> String -> Result String a

    -- List
    filter : (a -> Bool) -> List a -> List a
  </code></pre>
</section>

<section>
  <h2>Semantics</h2>
  <h3>(Comparing to Rails)</h3>
</section>

<style>
  .reveal .slides section .fragment.__highlight-current {
    opacity: 1;
    visibility: visible;
  }
  .reveal .slides section .fragment.__highlight-current.current-fragment {
    background-color: #ffff00;
  }
</style>

<section>
  <h2>Model-View-Controller</h2>
  <h3>Yeah, really!</h3>

  <pre><code data-trim data-noescape class="elm">
    main =
        Html.beginnerProgram
            <span class="fragment __highlight-current" data-fragment-index="1">{ <span class="fragment __highlight-current" data-fragment-index="2">model  = model</span>
            , <span class="fragment __highlight-current" data-fragment-index="3">view   = view</span>
            , <span class="fragment __highlight-current" data-fragment-index="4">update = update</span>
          }</span>

    <span class="fragment __highlight-current" data-fragment-index="2">model : Model
    model = ...</span>

    <span class="fragment __highlight-current" data-fragment-index="3">view : Model -> Html Msg
    view model = ...</span>

    <span class="fragment __highlight-current" data-fragment-index="4">update : Msg -> Model -> Model
    update msg model = ...</span>
  </code></pre>
</section>

<section>
  <h2>Advanced MVC</h2>

  <pre><code data-trim data-noescape class="elm">
    main =
        Html.<span class="fragment __highlight-current" data-fragment-index="0">program</span>
            { <span class="fragment __highlight-current" data-fragment-index="1">init = init</span>
            , view = view
            , <span class="fragment __highlight-current" data-fragment-index="2">update = update</span>
            , <span class="fragment __highlight-current" data-fragment-index="3">subscriptions = subscriptions</span>
            }

    init : <span class="fragment __highlight-current" data-fragment-index="1">(</span>Model<span class="fragment __highlight-current" data-fragment-index="1">, <span class="fragment __highlight-current" data-fragment-index="4">Cmd Msg</span>)</span>
    view : Model -> <span class="fragment __highlight-current" data-fragment-index="4">Html Msg</span>
    update : <span class="fragment __highlight-current" data-fragment-index="5">Msg</span> -> Model -> <span class="fragment __highlight-current" data-fragment-index="2">(</span>Model<span class="fragment __highlight-current" data-fragment-index="2">, <span class="fragment __highlight-current" data-fragment-index="4">Cmd Msg</span>)</span>
    <span class="fragment __highlight-current" data-fragment-index="3">subscriptions : Model -> <span class="fragment __highlight-current" data-fragment-index="4">Sub Msg</span></span>
  </code></pre>
</section>

<section>
  <h1>Diagram Time!</h1>
</section>

<section>
  <h2>Init</h2>

  <img src="img/init.png"/>
</section>

<section>
  <h2>Init</h2>

  <pre><code data-trim data-noescape class="elm">
    type alias Model =
        { username : String
        }

    init : (Model, Cmd Msg)
    init =
        ( { username = "" }
        , fetchUserList
        )

    fetchUserList : Cmd Msg
    fetchUserList =
        Http.send ...
  </code></pre>
</section>



<section>
  <h2>Update</h2>

  <img src="img/update.png"/>
</section>

<section>
  <h2>Update</h2>

  <pre><code data-trim data-noescape class="elm">
    type alias Model =
        { username : String
        }

    type Msg
        = UsernameChanged String
        | ...

    update : Msg -> Model -> (Model, Cmd Msg)
    update msg model =
        case msg of
            UsernameChanged newUsername ->
                ({model | username = newUsername}, Cmd.none)
            ... ->
                ...
  </code></pre>
</section>



<section>
  <h2>On Model Change</h2>

  <img src="img/model_change.png"/>
</section>

<section>
  <h2>On Model Change</h2>

  <pre><code data-trim data-noescape class="elm">
    subscriptions : Model -> Sub Msg
    subscriptions model =
        if model.showClock then
            Time.every (1 * second) TimerTicked
        else
            Sub.none

    view : Model -> Html Msg
    view model =
        Html.button
            [ onClick CalculateClicked ]
            [ text "do a calculation" ]
  </code></pre>
</section>



<section>
  <h2>Sending Msg's</h2>

  <img src="img/send_msg.png"/>
</section>

<section>
  <h2>Sending Msg's</h2>

  <pre><code data-trim data-noescape class="elm">
    -- some "typical" Msg values
    type Msg
      = UsernameChanged String                 -- Html Msg
      <span class="fragment">| FieldChanged String String             -- Html Msg</span>
      <span class="fragment">| CalculateClicked                       -- Html Msg</span>
      <span class="fragment">| TimerTicked Time                       -- Sub Msg</span>
      <span class="fragment">| RandomNumberChosen Int                 -- Cmd Msg</span>
      <span class="fragment">| UserListRecieved (WebData (List User)) -- Cmd Msg</span>
  </code></pre>
</section>

<section>
  <h2>Summary</h2>

  <dl>
    <dt>init : (Model, Cmd Msg)</dt>
    <dd>Called on page load. First model, trigger first <kbd>Cmd</kbd>s.</dd>
    <dt class="fragment" data-fragment-index="1">view : Model -> Html Msg</dt>
    <dd class="fragment" data-fragment-index="1">Called on model change. Generates HTML.</dd>
    <dt class="fragment" data-fragment-index="2">subscriptions : Model -> Sub Msg</dt>
    <dd class="fragment" data-fragment-index="2">Called on model change. Refreshes <kbd>Sub</kbd> list.</dd>
    <dt class="fragment" data-fragment-index="3">update : Msg -> Model -> (Model, Cmd Msg)</dt>
    <dd class="fragment" data-fragment-index="3">Called when Elm send a <kbd>Msg</kbd>. Updates model, sends <kbd>Cmd</kbd>s.</dd>
  </dl>
</section>


<section>
  <h1>Mini-Exercises</h1>
</section>

<section>
  <h1>Score Keeper</h1>
</section>

<section>
  <h2>Score Keeper Definition Statement</h2>

  <p>In order to track my team's score<br/>
    As a score keeper<br/>
    I want to increment their score</p>
</section>

<section>
  <h2>Score Keeper</h2>
  <pre><code data-trim data-noescape class="elm">
    module Main exposing (main)

    import Html exposing (..)

    main =
        beginnerProgram
            { model = initialModel
            , view = view
            , update = update
            }
	</code></pre>
</section>

<section>
  <h2>Score Keeper Model</h2>

  <pre><code data-trim data-noescape class="elm">
    type alias Model = Int

    initialModel : Model
    initialModel =
        0
  </code></pre>

</section>


<section>
  <h2>Score Keeper View</h2>

  <pre><code data-trim data-noescape class="elm">
    -- insert at top:
    import Html.Events exposing (onClick)

    --

    type Msg
        = Increment

    view : Model -> Html Msg
    view model =
        div
            []
            [ button [ onClick Increment ] [ text "+" ]
            , text (toString model)
            ]
  </code></pre>

</section>


<section>
  <h2>Score Keeper Update</h2>

  <pre><code data-trim data-noescape class="elm">
    update : Msg -> Model -> Model
    update msg model =
        case msg of
            Increment ->
                model + 1
  </code></pre>

</section>

<section>
  <h1>Done!</h1>
</section>

<section>
  <h1>Change: Basketball</h1>
</section>

<section>
  <h2>Basketball</h2>
  <p>In order to track my basketball team's score<br/>
    As my team's scorekeeper<br/>
    I want to increment the score by 1, 2 or 3
  </p>
</section>

<section>
  <h2>Basketball Changes: Model</h2>

  <pre class="fragment"><code data-trim data-noescape class="elm">
    -- No change!
    type alias Model = Int

    initialModel : Model
    initialModel =
        0
  </code></pre>
</section>


<section>
  <h2>Basketball Changes: Msg</h2>

  <pre class="fragment"><code data-trim data-noescape class="elm">
    type Msg
        = FreeThrow
        | JumpShot
        | ThreePointer
  </code></pre>
</section>

<section>
  <h2>Basketball Changes: View</h2>

  <pre class="fragment"><code data-trim data-noescape class="elm">
    view : Model -> Html Msg
    view model =
        div
            []
            [ button [ onClick FreeThrow ] [ text "free throw" ]
            , button [ onClick JumpShot ] [ text "jump shot" ]
            , button [ onClick ThreePointer ] [ text "trey" ]
            , text (toString model)
            ]
  </code></pre>
</section>

<section>
  <h2>Basketball Changes: Update</h2>

  <pre class="fragment"><code data-trim data-noescape class="elm">
    update : Msg -> Model -> Model
    update msg model =
        case msg of
            FreeThrow ->
                model + 1
            JumpShot ->
                model + 2
            ThreePointer ->
                model + 3
  </code></pre>
</section>

<section>
  <h1>Done!</h1>
</section>




<section>
  <h1>Refactor</h1>
</section>

<section>
  <h2>Refactor</h2>
  <p><kbd>FreeThrow</kbd>, <kbd>JumpShot</kbd>, and <kbd>ThreePointer</kbd> seem
    a bit redundant. Let's use one <kbd>Msg</kbd> to represent all three.</p>
</section>


<section>
  <h2>Refactor: Model</h2>

  <pre class="fragment"><code data-trim data-noescape class="elm">
    -- No change!
    type alias Model = Int

    initialModel : Model
    initialModel =
        0
  </code></pre>
</section>


<section>
  <h2>Refactor: Msg</h2>

  <pre class="fragment"><code data-trim data-noescape class="elm">
    type Msg
        = AddPoints Int
  </code></pre>
</section>

<section>
  <h2>Refactor: View</h2>

  <pre class="fragment"><code data-trim data-noescape class="elm">
    view : Model -> Html Msg
    view model =
        div
            []
            [ button [ onClick (AddPoints 1) ] [ text "free throw" ]
            , button [ onClick (AddPoints 2) ] [ text "jump shot" ]
            , button [ onClick (AddPoints 3) ] [ text "trey" ]
            , text (toString model)
            ]
  </code></pre>
</section>

<section>
  <h2>Refactor: Update</h2>

  <pre class="fragment"><code data-trim data-noescape class="elm">
    update : Msg -> Model -> Model
    update msg model =
        case msg of
            AddPoints int ->
                model + int
  </code></pre>
</section>

<section>
  <h1>Done!</h1>
</section>






<section>
  <h1>Oops!</h1>
</section>

<section>
  <h2>Undo</h2>
  <p>I accidentally pressed the wrong button! I need to undo a score.</p>
</section>


<section>
  <h2>Refactor: Model</h2>

  <pre class="fragment"><code data-trim data-noescape class="elm">
    type alias Model = List Int

    initialModel : Model
    initialModel =
        []
  </code></pre>
</section>


<section>
  <h2>Refactor: Msg</h2>

  <pre class="fragment"><code data-trim data-noescape class="elm">
    type Msg
        = AddPoints Int
        | Undo
  </code></pre>
</section>

<section>
  <h2>Refactor: View</h2>

  <pre class="fragment"><code data-trim data-noescape class="elm">
    view : Model -> Html Msg
    view model =
        div
            []
            [ button [ onClick (AddPoints 1) ] [ text "free throw" ]
            , button [ onClick (AddPoints 2) ] [ text "jump shot" ]
            , button [ onClick (AddPoints 3) ] [ text "trey" ]
            , text (toString <mark>(List.sum model)</mark>)
            , button [ onClick Undo ] [ text "undo!" ]
            ]
  </code></pre>
</section>

<section>
  <h2>Refactor: Update</h2>

  <pre class="fragment"><code data-trim data-noescape class="elm">
    update : Msg -> Model -> Model
    update msg model =
        case msg of
            AddPoints int ->
                int :: model
            Undo ->
                List.drop 1 model
  </code></pre>
</section>

<section>
  <h1>Done!</h1>
</section>






<section>
  <h1>Fresh Start: A Clock</h1>
</section>

<section>
  <h2>A Clock</h2>
  <p>Let's move away from "beginnerProgram"</p>
</section>


<section>
  <h2>A Clock</h2>

  <pre><code data-trim data-noescape class="elm">
    module Main exposing (main)

    import Html exposing (..)
    import Date
    import Time

    main =
        program
            { init = init
            , view = view
            , update = update
            , subscriptions = subscriptions
            }
  </code></pre>
</section>


<section>
  <h2>Clock: Model &amp; Init</h2>

  <pre><code data-trim data-noescape class="elm">
    type alias Model = Maybe Time.Time

    init : (Model, Cmd Msg)
    init =
        ( Nothing
        , Cmd.none
        )
  </code></pre>
</section>


<section>
  <h2>Clock: Msg</h2>

  <pre><code data-trim data-noescape class="elm">
    type Msg
        = Tick Time.Time
  </code></pre>
</section>

<section>
  <h2>Clock: View</h2>

  <pre><code data-trim data-noescape class="elm">
view : Model -> Html Msg
view model =
    div [] <mark><|</mark>
        case model of
            Just d ->
                [ text <| ":" ++ toString (Date.second d) ]

            Nothing ->
                [ text "don't know yet!" ]
  </code></pre>
</section>

<section>
  <h2>Clock: Update</h2>

  <pre class="fragment"><code data-trim data-noescape class="elm">
update : Msg -> Model -> (Model, Cmd Msg)
update msg model =
    case msg of
        Tick t ->
            (Just (Date.fromTime t), Cmd.none)
  </code></pre>
</section>

<section>
  <h2>Clock: Subscriptions</h2>

  <pre class="fragment"><code data-trim data-noescape class="elm">
subscriptions : Model -> Sub Msg
subscriptions model =
    Time.every (100 * Time.millisecond) Tick
  </code></pre>
</section>

<section>
  <h1>Done!</h1>
</section>




			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
